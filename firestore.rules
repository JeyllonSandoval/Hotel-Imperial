rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Reglas para la colecci√≥n Comments
    match /Comments/{commentId} {
      // Permitir lectura a todos (desarrollo)
      allow read: if true;
      
      // Permitir escritura solo a usuarios autenticados
      allow write: if request.auth != null 
        && request.auth.uid != null
        && request.resource.data.authorEmail == request.auth.token.email
        && request.resource.data.authorName is string
        && request.resource.data.textContent is string
        && request.resource.data.timestamp is timestamp
        && request.resource.data.status is bool;
    }
    
    // Reglas para otras colecciones (si las agregas en el futuro)
    match /{document=**} {
      // Denegar acceso por defecto a otras colecciones
      allow read, write: if false;
    }
  }
}
